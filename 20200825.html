<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hamablo</title>
    <link rel="stylesheet" href="my_page.css">
</head>
<body>
    <header>
<div class="header-logo">

    <h1>ã¯ã¾ã¶ã‚</h1>
    <p>ã“ã®ãƒ–ãƒ­ã‚°ã¯ã€åƒ•ã®å®¶æ—ã‚„å‹äººã«å‘ã‘ã¦æ›¸ãITçŸ¥è­˜å‘ä¸Šãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã™ã€‚
    </p>
</div>
<div class="header-list">
    <ul>
        <li><a href="index.html">HOME</a></li>
        <li><a href="kiji.html">è¨˜äº‹ä¸€è¦§</a></li>
        <li><a href="prof.html">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</a></li>

    </ul>
    
</div>

    </header>
<div class="title">
<h3><!--ãƒ–ãƒ­ã‚°ã®ã‚¿ã‚¤ãƒˆãƒ«-->
ypsã€€Laravel è¡¨ç¤º


</h3>
</div>
<div class="naiyou">
    <pre>
<p><!--æœ¬æ–‡-->
è¨€ã£ã¨ãã¾ã™ãŒä»Šå›ã¯ç°¡å˜ã˜ã‚ƒãªã„
ã¯ã„ã€è¡Œãã¾ã™ã‚ˆãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ï¼ï¼ï¼ï¼

ã‚„ã‚‹ã“ã¨ã¯Laravelã§worldcup2014dbã®é¸æ‰‹ä¸€è¦§è¡¨ç¤º
ã¾ãšã„ããªã‚Šæ„å‘³ä¸ãƒ¯ãƒ¼ãƒ‰ã€Œmysqldump]
ã“ã‚Œã¯mysqlã«ã‚ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆãªã©ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã™ã‚‹æ„Ÿã˜ã‹ãªï¼ï¼ï¼
cd /var/www/html/ypsã€€ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§
mkdir resources/sql/ Laravelã®resourcesã®ãªã‹ã«sqlãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
ãã®ãªã‹ã«å…¥ã‚Œã¾ã™
mysqldump -u root -p -d worldcup2014db > resources/sql/worldcup2014db.sql
æ³¨ç›®ã¯laravelã®resourcesã®ãªã‹ã®SQLã®ä¸­ã«ãƒ€ãƒ³ãƒ—ã—ãŸã£ã¦ã“ã¨
ç¶šã„ã¦ãƒã‚§ãƒƒã‚¯
$ grep -i 'create table' resources/sql/worldcup2014db.sql
â†“ã“ã‚ŒãŒã§ã‚‹
CREATE TABLE `countries` (
CREATE TABLE `goals` (
CREATE TABLE `goals_tmp` (
CREATE TABLE `pairings` (
CREATE TABLE `pairings_tmp` (
CREATE TABLE `players` (
CREATE TABLE `players_tmp` (

ã‚“ã§countriesã¨goalsã¨playersã¨pairingsã«è¿½è¨˜

vi resources/sql/worldcup2014db.sql

CREATE TABLE `countries` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) DEFAULT NULL,
  `ranking` int(11) DEFAULT NULL,
  `group_name` varchar(1) DEFAULT NULL,
  â†“ã“ã£ã‹ã‚‰
  `expired_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `deleted_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  â†‘ã“ã“ã¾ã§
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

ï¼”ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã§ã­

ã“ã‚Œã¯ä½•ã—ã¦ã‚‹ã‹ã£ã¦ãƒ¼ã¨
æ—¢å­˜ã®ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆã‚’æ›¸ãæ›ãˆã¦ã¾ã™ã€‚ä¸€å›ãƒãƒ©ã—ã¦ã‚‹æ„Ÿã˜ã§ã™ã€‚
mysqlã«ãƒ­ã‚°ã‚¤ãƒ³
worldcup2014dbã‚’æ¶ˆã—ã¾ã™
drop database worldcup2014db;
æ¶ˆã—ã¦ã™ãä¸­èº«ã™ã£ã‹ã‚‰ã‹ã‚“ã®worldcup2014dbã‚’ä½œã‚Šã¾ã™
create database worldcup2014db;
use worldcup2014db;
ã•ã£ãæ§‹æˆå¤‰æ›´ã—ãŸã‚„ã¤ã‚’æµã—è¾¼ã¿ã¾ã™
source resources/sql/worldcup2014db.sql;
show table;â†ã“ã‚Œã§ãƒã‚§ãƒƒã‚¯

ï¼ƒtask3ã§ã‚„ã£ãŸworldcup2014ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€è§£å‡ã—ã¾ã™

cd /tmp
sudo yum install wget unzip -y
wget tech.pjin.jp/wp-content/uplâ€¦
unzip worldcup2014.zip
ls -la worldcup2014.sql

ã§ã€ã“ã®ä¸­èº«ã ã‘æŠ½å‡ºã—ãŸã„
ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆã¯ã§ãã¦ã‚‹
tmpã®æ–¹ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã¾ã‚‹ã£ã¨å‰Šé™¤ã—ã¡ã‚ƒã„ã¾ã™
vi /tmp/worldcup2014.sql 

â†“ã“ã£ã‹ã‚‰
-- 
-- ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ§‹é€  `countries`
-- 
   
CREATE TABLE `countries` (
  `id` int(11) NOT NULL,
  `name` varchar(50) DEFAULT NULL,
  `ranking` int(11) DEFAULT NULL,
  `group_name` varchar(1) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
â†‘ã“ã“ã¾ã§

ã‚“ã§ã€€cd-ã§ypsã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æˆ»ã£ã¦
ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆã‚’å‰Šé™¤ã—ãŸæ–¹ã‚’æµã—è¾¼ã¿ã¾ã™
source /tmp/worldcup2014.sql
ä½•å€‹ã‹warningå‡ºã‚‹ã‘ã©ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆã‚’å‰Šé™¤ã—ã¦ãªã„ã¨ã“ã ã‹ã‚‰ã‚·ã‚«ãƒˆã§ãŠk

ãƒ‡ãƒ¼ã‚¿ãŒå…¥ã£ã¦ã‚‹ã‹ã©ã†ã‹ç¢ºèªã—ã¾ã™
mysql> select count(*) from countries;
+----------+
| count(*) |
+----------+
|       32 |
+----------+

mysql> select count(*) from goals;
+----------+
| count(*) |
+----------+
|      188 |
+----------+

mysql> select count(*) from pairings;
+----------+
| count(*) |
+----------+
|      144 |
+----------+

mysql> select count(*) from players;
+----------+
| count(*) |
+----------+
|      736 |
+----------+
ä»¥ä¸Šã§ãƒ‡ãƒ¼ã‚¿å®Œæˆ

ç¶šã„ã¦ãƒ¢ãƒ‡ãƒ«ã®ä½œæˆ
æ—¢å­˜ã®ãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¹ã¯å‰Šé™¤
rm app/Model/Player.php
ãƒ¢ãƒ‡ãƒ«ä½œã‚Šã¾ã™
php artisan make:model Models/Country -m
php artisan make:model Models/Goal -m
php artisan make:model Models/Pairing -m
php artisan make:model Models/Player -m
ã“ã®-m ã¯ -m, --migrationã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§Create a new migration file for the model
ãƒã‚¤ã‚¯ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚ä¸€ç·’ã«ä½œã‚‹ã‚“ã§ã™ã­
ãƒ†ãƒ¼ãƒ–ãƒ«åãŒè¤‡æ•°å½¢ã§ãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¹ãŒå˜æ•°å½¢ãªã‚‰è‡ªå‹•ã§ç´ä»˜ãã¾ã™
ãŒã€å¿µã®ãŸã‚ã«æ˜ç¤ºã—ã¾ã™ã€‚
//
    protected $table = "players";
    protected $dates = ["expired_at", "deleted_at", "updated_at", "created_at"];

ï¼”ã¤ã¨ã‚‚ã­ã€‚
ã€€ç¶šãã¾ã—ã¦ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
php artisan make:controller CountryController --resource --model=Models/Country
php artisan make:controller GoalController --resource --model=Models/Goal
php artisan make:controller PairingController --resource --model=Models/Pairing
php artisan make:controller PlayerController --resource --model= Models/Player
php artisan make:controller WelcomeController --resource

ã“ã®--resourceã¨--model=Models/Playerã¯
-r, --resource         Generate a resource controller class.
-m, --model[=MODEL]    Generate a resource controller for the given model.
ãƒªã‚½ãƒ¼ã‚¹ã¨ã¯ã€ä½•ã‹ã®æºã£ã¦æ„å‘³ã‚‰ã—ã„

dbâ†’Modelâ†’Controllerâ†’view
resources/view/welcome.blade.php
ã®ä¸­èº«ã‚’å…¨æ¶ˆã—
â†“ã‚³ãƒ”ãƒš è¦‹ãˆã‚‹ã‹ãªã€€è¦‹ãˆãªã‹ã£ãŸã‚‰<a href="https://github.com/yotaro-ok/myapp/blob/develop/resources/views/welcome.blade.php">ã“ã¡ã‚‰ã¸</a>

</p></pre>




ã‚ã¨ãƒ«ãƒ¼ã‚¿ãƒ¼
app/routes/web.php

ã‚³ãƒ”ãƒšã­

<?php

use Illuminate\Support\Facades\Route;

/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
|
| Here is where you can register web routes for your application. These
| routes are loaded by the RouteServiceProvider within a group which
| contains the "web" middleware group. Now create something great!
|
*/

/*
Route::get('/', function () {
    return view('welcome');
});
*/

Route::get('/', 'WelcomeController@index');
Route::resource('players', 'PlayerController');
Route::resource('countries', 'CountryController');
Route::resource('goals', 'GoalController');
Route::resource('pairings', 'PairingController');
ã‚¯ãƒ©ã‚¹è¿½åŠ ã—ãŸã‚Šã€ãƒ«ãƒ¼ã‚¿ãƒ¼å¤‰æ›´ã—ãŸã‚‰ã€ã“ã‚ŒğŸ‘‡ã‚„ã‚ã†

php artisan cache:clear && php artisan config:clear && php artisan route:clear && php artisan view:clear
composer clear-cache && composer dump-autoload --optimize
sudo chown -R centos:nginx /var/www/html/yps

ã“ã“ã¾ã§ãŒã‚„ã‚Šæ–¹ã§ã™
ã“ã£ã‹ã‚‰ãŒè‡ªèµ°

ãƒ’ãƒ³ãƒˆã¯
â‘ ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ“ãƒ¥ãƒ¼ã‚’ï¼‘ã¤è¿½åŠ (total_goals)
ã€€â‘¡functionã‚’ï¼‘ã¤è¿½åŠ 
ã€€â‘¢controllerã‹ã‚‰viewã«å¤‰æ•°æ¸¡ã—

æ­£ç›´æ„å‘³ä¸
ã‚„ã‚Šã¾ã—ã‚‡ã†
ã¾ãšã€mysqlã«viewã‚’ä½œã‚Šã¾ã™
mysqlã«ãƒ­ã‚°ã‚¤ãƒ³
create view total_goals as select ä½•ã€…
æ°—ã‚’ã¤ã‘ã‚‹ã®ã¯ã‚«ãƒ©ãƒ åã€‚goalsã«ã—ã¾ã—ã‚‡ã†ã€‚
ãã—ãŸã‚‰Model,Controller
ä»Šã¾ã§ä½œã£ã¦ããŸã‚ˆã†ãªæµã‚Œã§ä½œæˆã—ã¾ã™
ã‚“ã§
php artisan cache:clear && php artisan config:clear && php artisan route:clear && php artisan view:clear
composer clear-cache && composer dump-autoload --optimize
sudo chown -R centos:nginx /var/www/html/yps

ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦logã‚’å‡ºåŠ›ã—ãŸã‹ã£ãŸã‚‰
welcomeController.phpã«
<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\Models\Player;
use Throwable;
use Log;

class WelcomeController extends Controller
{
    //
    public const PAGINATE_LIMIT = 10;

    /**
     * Display a listing of the resource.
     *
     * @return \Illuminate\Http\Response
     */
    public function index()
    {
        try {
            //
            $players = Player::getWithCountryBySimplePaginate(self::PAGINATE_LIMIT);
            return view('welcome')->with('players', $players);
        } catch(Throwable $e) {
            Log::debug($e->getMessage());
            abort(500);
        }
    }
}

composer require laravel/ui
php artisan ui bootstrap
npm install && npm run devâ†ã“ã“ã§ã‚¨ãƒ©ãƒ¼å‡ºãŸ
nodejs,npmãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—
sudo yum remove node npm -y
curl -sL https://rpm.nodesource.com/setup_12.x  | sudo bash -
sudo yum install nodejs -y

ã¯ã„ï¼ï¼ï¼ï¼ä»¥ä¸Šã§ã™ï¼ï¼ï¼
ã‚ã£ã¡ã‚ƒå­¦ã‚“ã ï¼ï¼ï¼ï¼ï¼
å¾Œã¿ã‚“ãªå„ªã—ã„ï¼ï¼ï¼



</p></pre>
</div>

<footer>
    <div class="orei">
        <p>æœ€å¾Œã¾ã§èª­ã‚“ã§ã„ãŸã ãã¾ã—ã¦ <br> 
            
        æœ¬å½“ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚</p>
        <p>ã¾ãŸã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚</p>
    </div>
    <div class="copy-light">
    <span>Â©ï¸ ãƒãƒãƒ–ãƒ­.inc</span>  

    </div>



</footer>




</body>
</html>
